<script>

  function addMessageRow(msg) {
    logger.info(JSON.stringify(msg));
    $("#messages").append(`<div><span class='eventTime'>[${msg.timestamp}]</span> ${msg.text}</div>`);
    $("#messages").scrollTop($("#messages")[0].scrollHeight);
    if($("#messages div").length > 10) {
      $("#messages").find("div:first").remove();
    }
  }

  require('electron').ipcRenderer.on("OCRError", (event) => {
    alert("Error getting area info from screenshot. Please try again");
  });

  require('electron').ipcRenderer.on("message", (event, msg) => {
    addMessageRow(msg);
  });
  
  $("document").ready(() => {
    var messages = remote.getGlobal("messages");
    for(var i = 0; i < messages.length; i++) {
      addMessageRow(messages[i]);
    }
  });
  
</script>


